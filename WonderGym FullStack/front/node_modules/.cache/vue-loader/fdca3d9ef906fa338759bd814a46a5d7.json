{"remainingRequest":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\src\\views\\trainers\\New2.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\src\\views\\trainers\\New2.vue","mtime":1634124893664},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634035324667},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1634035332053},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634035324667},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1634035335308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBjcmVhdGVUcmFpbmVyLA0KICBjcmVhdGVUcmFpbmVyV2l0aEltYWdlLA0KICBnZXRUcmFpbmVyLA0KICB1cGRhdGVUcmFpbmVyLA0KICB1cGRhdGVUcmFpbmVySW1hZ2UsDQp9IGZyb20gIi4uLy4uL2NvbnRyb2xsZXJzL1RyYWluZXIuY29udHJvbGxlciI7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgaW1hZ2U6IG51bGwsDQogICAgICBjb2RlOiAwLA0KICAgICAgbmFtZTogIiIsDQogICAgICBwcmljZTogMCwNCiAgICAgIGNhdGVnb3JpZXM6IFtdLA0KICAgICAgaW1hZ2VVcmw6ICIiLA0KICAgICAgc25hY2tiYXI6IGZhbHNlLA0KICAgICAgc25hY2tiYXJUZXh0OiAiIiwNCiAgICAgIGlzTmV3OiB0cnVlLA0KICAgICAgaW1hZ2VSdWxlczogWw0KICAgICAgICAodmFsdWUpID0+DQogICAgICAgICAgIXZhbHVlIHx8DQogICAgICAgICAgdmFsdWUuc2l6ZSA8IDIwMDAwMDAgfHwNCiAgICAgICAgICAiQXZhdGFyIHNpemUgc2hvdWxkIGJlIGxlc3MgdGhhbiAyIE1CISIsDQogICAgICBdLA0KICAgICAgY2hhbmdlSW1hZ2U6IGZhbHNlLA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgY29uc3QgY29kZSA9IHRoaXMuJHJvdXRlLnBhcmFtcy5jb2RlOw0KICAgIGlmIChjb2RlICE9IHVuZGVmaW5lZCkgew0KICAgICAgZ2V0VHJhaW5lcihjb2RlKQ0KICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICBjb25zdCB0cmFpbmVyID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICB0aGlzLmNvZGUgPSB0cmFpbmVyLmNvZGU7DQogICAgICAgICAgdGhpcy5uYW1lID0gdHJhaW5lci5uYW1lOw0KICAgICAgICAgIHRoaXMuYWdlID0gdHJhaW5lci5hZ2U7DQogICAgICAgICAgdGhpcy5wcm9maWxlID0gdHJhaW5lci5wcm9maWxlOw0KICAgICAgICAgIHRoaXMuZXhwZXJpZW5jZSA9IHRyYWluZXIuZXhwZXJpZW5jZTsNCiAgICAgICAgICB0aGlzLmVtYWlsID0gdHJhaW5lci5lbWFpbDsNCiAgICAgICAgICB0aGlzLmltYWdlVXJsID0gdHJhaW5lci5pbWFnZVVybDsNCg0KICAgICAgICAgIHRoaXMuaXNOZXcgPSBmYWxzZTsNCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ3VhcmRhckVudHJlbmFkb3IoKSB7DQogICAgICBsZXQgcmVxdWVzdCA9IG51bGw7DQogICAgICBpZiAodGhpcy5pbWFnZSA9PSBudWxsIHx8IHRoaXMuaW1hZ2UgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIGNvbnN0IHRyYWluZXIgPSB7DQogICAgICAgICAgY29kZTogdGhpcy5jb2RlLA0KICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwNCiAgICAgICAgICBhZ2U6ICB0aGlzLmFnZSwNCiAgICAgICAgICBwcm9maWxlOiB0aGlzLnByb2ZpbGUsDQogICAgICAgICAgZXhwZXJpZW5jZTogdGhpcy5leHBlcmllbmNlLA0KICAgICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLA0KICAgICAgICB9Ow0KDQogICAgICAgIHJlcXVlc3QgPSBjcmVhdGVUcmFpbmVyKHRyYWluZXIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgdHJhaW5lciA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgICB0cmFpbmVyLmFwcGVuZCgiY29kZSIsIHRoaXMuY29kZSk7DQogICAgICAgIHRyYWluZXIuYXBwZW5kKCJuYW1lIiwgdGhpcy5uYW1lKTsNCiAgICAgICAgdHJhaW5lci5hcHBlbmQoImFnZSIsIHRoaXMuYWdlKTsNCiAgICAgICAgdHJhaW5lci5hcHBlbmQoInByb2ZpbGUiLCB0aGlzLnByb2ZpbGUpOw0KICAgICAgICB0cmFpbmVyLmFwcGVuZCgiZXhwZXJpZW5jZSIsIHRoaXMuZXhwZXJpZW5jZSk7DQogICAgICAgIHRyYWluZXIuYXBwZW5kKCJlbWFpbCIsIHRoaXMuZW1haWwpOw0KICAgICAgICB0cmFpbmVyLmFwcGVuZCgiaW1hZ2UiLCB0aGlzLmltYWdlKTsNCg0KICAgICAgICByZXF1ZXN0ID0gY3JlYXRlVHJhaW5lcldpdGhJbWFnZSh0cmFpbmVyKTsNCiAgICAgIH0NCg0KICAgICAgcmVxdWVzdA0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy5vcGVuU3VjY2Vzc0RpYWxvZygiR3VhcmRhZG8gY29ycmVjdGFtZW50ZSIpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKTsNCiAgICB9LA0KICAgIGFjdHVhbGl6YXJFbnRyZW5hZG9yKCkgew0KICAgICAgaWYgKA0KICAgICAgICB0aGlzLmNvZGUgPT0gdW5kZWZpbmVkIHx8DQogICAgICAgIHRoaXMuY29kZSA9PSAiIiB8fA0KICAgICAgICB0aGlzLm5hbWUgPT0gdW5kZWZpbmVkIHx8DQogICAgICAgIHRoaXMubmFtZSA9PSAiIiB8fA0KICAgICAgICB0aGlzLmFnZSA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgdGhpcy5hZ2UgPT0gIiIgIHx8DQogICAgICAgIHRoaXMucHJvZmlsZSA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgdGhpcy5wcm9maWxlID09ICIiICB8fA0KICAgICAgICB0aGlzLmV4cGVyaWVuY2UgPT0gdW5kZWZpbmVkIHx8DQogICAgICAgIHRoaXMuZXhwZXJpZW5jZSA9PSAiIiAgfHwNCiAgICAgICAgdGhpcy5lbWFpbCA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgdGhpcy5lbWFpbCA9PSAiIiAgDQogICAgICApIHsNCiAgICAgICAgdGhpcy5vcGVuRXJyb3JEaWFsb2coIkluZ3Jlc2UgbG9zIGNhbXBvcyBvYmxpZ2F0b3Jpb3MiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KDQogICAgICBjb25zdCB0cmFpbmVyID0gew0KICAgICAgICBjb2RlOiB0aGlzLmNvZGUsDQogICAgICAgIG5hbWU6IHRoaXMubmFtZSwNCiAgICAgICAgYWdlOiB0aGlzLmFnZSwNCiAgICAgICAgcHJvZmlsZTogdGhpcy5wcm9maWxlLA0KICAgICAgICBleHBlcmllbmNlOiB0aGlzLmV4cGVyaWVuY2UsDQogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLA0KICAgICAgfTsNCiAgICAgIHVwZGF0ZVRyYWluZXIodGhpcy5jb2RlLCB0cmFpbmVyKQ0KICAgICAgICAudGhlbigoKSA9PiB7DQogICAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMub3BlblN1Y2Nlc3NEaWFsb2coIlNlIGhhIGFjdHVhbGl6YWRvIGVsIGVudHJlbmFkb3I6ICIgKyB0aGlzLmNvZGUpOw0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gdGhpcy5vcGVuRXJyb3JEaWFsb2coIkVycm9yIGFsIGFjdHVhbGl6YXIgZWwgZW50cmVuYWRvciIpKTsNCiAgICB9LA0KICAgIGNhbWJpYXJJbWFnZW4oKSB7DQogICAgICBpZiAodGhpcy5pbWFnZSA9PSB1bmRlZmluZWQgfHwgdGhpcy5pbWFnZSA9PSAiIikgew0KICAgICAgICB0aGlzLm9wZW5FcnJvckRpYWxvZygiTGEgaW1hZ2VuIGVzIHVuIGNhbXBvIG9ibGlnYXRvcmlvIik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOw0KICAgICAgZGF0YS5hcHBlbmQoImltYWdlIiwgdGhpcy5pbWFnZSk7DQogICAgICB1cGRhdGVUcmFpbmVySW1hZ2UodGhpcy5jb2RlLCBkYXRhKQ0KICAgICAgICAudGhlbigoKSA9Pg0KICAgICAgICAgIHRoaXMub3BlblN1Y2Nlc3NEaWFsb2coIlNlIGhhIGFjdHVhbGl6YWRvIGVsIGVudHJlbmFkb3I6ICIgKyB0aGlzLmNvZGUpDQogICAgICAgICkNCiAgICAgICAgLmNhdGNoKCgpID0+IHRoaXMub3BlbkVycm9yRGlhbG9nKCJFcnJvciBhbCBhY3R1YWxpemFyIGVsIGVudHJlbmFkb3IiKSk7DQogICAgfSwNCiAgICByZW1vdmVDaGlwKGl0ZW0pIHsNCiAgICAgIHRoaXMuY2F0ZWdvcmllcy5zcGxpY2UodGhpcy5jYXRlZ29yaWVzLmluZGV4T2YoaXRlbSksIDEpOw0KICAgICAgdGhpcy5jYXRlZ29yaWVzID0gWy4uLnRoaXMuY2F0ZWdvcmllc107DQogICAgfSwNCiAgICBvcGVuU3VjY2Vzc0RpYWxvZyhtZW5zYWplKSB7DQogICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9IG1lbnNhamU7DQogICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsNCiAgICB9LA0KICAgIG9wZW5FcnJvckRpYWxvZyhtZW5zYWplKSB7DQogICAgICB0aGlzLnNuYWNrYmFyVGV4dCA9IG1lbnNhamU7DQogICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsNCiAgICB9LA0KICAgIGNsb3NlQ29uZmlybWF0aW9uKCkgew0KICAgICAgdGhpcy5zbmFja2JhciA9IGZhbHNlOw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi90cmFpbmVycyIpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["New2.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"New2.vue","sourceRoot":"src/views/trainers","sourcesContent":["<template>\r\n  <div class=\"new-trainer\">\r\n    <h1>{{ isNew ? \"New\" : \"Edit\" }} Trainer</h1>\r\n    <div v-if=\"!changeImage\">\r\n      <v-img v-if=\"!isNew\" :src=\"imageUrl\"></v-img>\r\n      <v-file-input\r\n        v-if=\"isNew\"\r\n        accept=\"image/*\"\r\n        label=\"Image\"\r\n        v-model=\"image\"\r\n        :rules=\"imageRules\"\r\n      ></v-file-input>\r\n      <v-text-field\r\n        label=\"Code\"\r\n        v-model=\"code\"\r\n        prepend-icon=\"mdi-code-tags\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Name\"\r\n        v-model=\"name\"\r\n        prepend-icon=\"mdi-account\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Age\"\r\n        v-model=\"age\"\r\n        prepend-icon=\"mdi-account\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Profile\"\r\n        v-model=\"profile\"\r\n        prepend-icon=\"mdi-currency-usd\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Experience\"\r\n        v-model=\"experience\"\r\n        prepend-icon=\"mdi-account\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Email\"\r\n        v-model=\"email\"\r\n        prepend-icon=\"mdi-account\"\r\n      ></v-text-field>\r\n      \r\n      <div class=\"botones\">\r\n        <v-btn color=\"primary\" @click=\"guardarEntrenador()\" v-if=\"isNew\"\r\n          >Guardar</v-btn\r\n        >\r\n        <v-btn color=\"warning\" @click=\"changeImage = true\" v-if=\"!isNew\"\r\n          >Actualizar imagen</v-btn\r\n        >\r\n        <v-btn color=\"success\" @click=\"actualizarEntrenador()\" v-if=\"!isNew\"\r\n          >Actualizar</v-btn\r\n        >\r\n      </div>\r\n    </div>\r\n    <div v-if=\"changeImage\">\r\n      <v-file-input\r\n        accept=\"image/*\"\r\n        label=\"Image\"\r\n        v-model=\"image\"\r\n        :rules=\"imageRules\"\r\n      ></v-file-input>\r\n      <div class=\"botones\">\r\n        <v-btn color=\"success\" @click=\"cambiarImagen()\"\r\n          >Actualizar imagen</v-btn\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <v-snackbar v-model=\"snackbar\">\r\n      {{ snackbarText }}\r\n\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn color=\"pink\" text v-bind=\"attrs\" @click=\"closeConfirmation()\">\r\n          Close\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  createTrainer,\r\n  createTrainerWithImage,\r\n  getTrainer,\r\n  updateTrainer,\r\n  updateTrainerImage,\r\n} from \"../../controllers/Trainer.controller\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      image: null,\r\n      code: 0,\r\n      name: \"\",\r\n      price: 0,\r\n      categories: [],\r\n      imageUrl: \"\",\r\n      snackbar: false,\r\n      snackbarText: \"\",\r\n      isNew: true,\r\n      imageRules: [\r\n        (value) =>\r\n          !value ||\r\n          value.size < 2000000 ||\r\n          \"Avatar size should be less than 2 MB!\",\r\n      ],\r\n      changeImage: false,\r\n    };\r\n  },\r\n  created() {\r\n    const code = this.$route.params.code;\r\n    if (code != undefined) {\r\n      getTrainer(code)\r\n        .then((response) => {\r\n          const trainer = response.data;\r\n          this.code = trainer.code;\r\n          this.name = trainer.name;\r\n          this.age = trainer.age;\r\n          this.profile = trainer.profile;\r\n          this.experience = trainer.experience;\r\n          this.email = trainer.email;\r\n          this.imageUrl = trainer.imageUrl;\r\n\r\n          this.isNew = false;\r\n        })\r\n        .catch((err) => console.error(err));\r\n    }\r\n  },\r\n  methods: {\r\n    guardarEntrenador() {\r\n      let request = null;\r\n      if (this.image == null || this.image == undefined) {\r\n        const trainer = {\r\n          code: this.code,\r\n          name: this.name,\r\n          age:  this.age,\r\n          profile: this.profile,\r\n          experience: this.experience,\r\n          email: this.email,\r\n        };\r\n\r\n        request = createTrainer(trainer);\r\n      } else {\r\n        const trainer = new FormData();\r\n        trainer.append(\"code\", this.code);\r\n        trainer.append(\"name\", this.name);\r\n        trainer.append(\"age\", this.age);\r\n        trainer.append(\"profile\", this.profile);\r\n        trainer.append(\"experience\", this.experience);\r\n        trainer.append(\"email\", this.email);\r\n        trainer.append(\"image\", this.image);\r\n\r\n        request = createTrainerWithImage(trainer);\r\n      }\r\n\r\n      request\r\n        .then(() => {\r\n          this.openSuccessDialog(\"Guardado correctamente\");\r\n        })\r\n        .catch((err) => console.error(err));\r\n    },\r\n    actualizarEntrenador() {\r\n      if (\r\n        this.code == undefined ||\r\n        this.code == \"\" ||\r\n        this.name == undefined ||\r\n        this.name == \"\" ||\r\n        this.age == undefined ||\r\n        this.age == \"\"  ||\r\n        this.profile == undefined ||\r\n        this.profile == \"\"  ||\r\n        this.experience == undefined ||\r\n        this.experience == \"\"  ||\r\n        this.email == undefined ||\r\n        this.email == \"\"  \r\n      ) {\r\n        this.openErrorDialog(\"Ingrese los campos obligatorios\");\r\n        return;\r\n      }\r\n\r\n      const trainer = {\r\n        code: this.code,\r\n        name: this.name,\r\n        age: this.age,\r\n        profile: this.profile,\r\n        experience: this.experience,\r\n        email: this.email,\r\n      };\r\n      updateTrainer(this.code, trainer)\r\n        .then(() => {\r\n          this.changeImage = false;\r\n          this.openSuccessDialog(\"Se ha actualizado el entrenador: \" + this.code);\r\n        })\r\n        .catch(() => this.openErrorDialog(\"Error al actualizar el entrenador\"));\r\n    },\r\n    cambiarImagen() {\r\n      if (this.image == undefined || this.image == \"\") {\r\n        this.openErrorDialog(\"La imagen es un campo obligatorio\");\r\n        return;\r\n      }\r\n\r\n      const data = new FormData();\r\n      data.append(\"image\", this.image);\r\n      updateTrainerImage(this.code, data)\r\n        .then(() =>\r\n          this.openSuccessDialog(\"Se ha actualizado el entrenador: \" + this.code)\r\n        )\r\n        .catch(() => this.openErrorDialog(\"Error al actualizar el entrenador\"));\r\n    },\r\n    removeChip(item) {\r\n      this.categories.splice(this.categories.indexOf(item), 1);\r\n      this.categories = [...this.categories];\r\n    },\r\n    openSuccessDialog(mensaje) {\r\n      this.snackbarText = mensaje;\r\n      this.snackbar = true;\r\n    },\r\n    openErrorDialog(mensaje) {\r\n      this.snackbarText = mensaje;\r\n      this.snackbar = true;\r\n    },\r\n    closeConfirmation() {\r\n      this.snackbar = false;\r\n      this.$router.push(\"/trainers\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scope>\r\n.botones {\r\n  display: flex;\r\n  justify-content: right;\r\n}\r\n</style>"]}]}