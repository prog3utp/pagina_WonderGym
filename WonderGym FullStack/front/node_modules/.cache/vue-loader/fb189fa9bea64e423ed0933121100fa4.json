{"remainingRequest":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\src\\views\\products\\New.vue?vue&type=style&index=0&scope=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\src\\views\\products\\New.vue","mtime":1634190637774},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1634035327342},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1634035337922},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1634035331680},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1634035324667},{"path":"C:\\Users\\Administrador\\REPO DEL PROFE COMPLETO\\mTICP472022\\Ciclo III\\uploads\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1634035335308}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmJvdG9uZXMgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBqdXN0aWZ5LWNvbnRlbnQ6IHJpZ2h0Ow0KICBjb2xvcjogYWxpY2VibHVlOzsNCn0NCi5tZGktYWNjb3VudDo6YmVmb3JlIHsNCiAgY29sb3I6IHJnYigyNTUsIDgxLCAwKTsNCn0NCi52LWljb24udi1pY29uLnYtaWNvbi0tbGluayB7DQogIGNvbG9yOiByZ2IoMjU1LCA4MSwgMCk7DQp9DQoubWRpLWNvZGUtdGFnczo6YmVmb3JlIHsNCiAgY29sb3I6IHJnYigyNTUsIDgxLCAwKTsNCg0KfQ0KLnRoZW1lLS1saWdodC52LWlucHV0IGlucHV0LCAudGhlbWUtLWxpZ2h0LnYtaW5wdXQgdGV4dGFyZWEgew0KICBjb2xvcjogYWxpY2VibHVlOw0KfQ0KLm1kaS1jdXJyZW5jeS11c2Q6OmJlZm9yZSB7DQogIGNvbG9yOiByZ2IoMjU1LCA4MSwgMCk7DQp9DQoubWRpLXNoYXBlOjpiZWZvcmUgew0KICBjb2xvcjogcmdiKDI1NSwgODEsIDApDQp9DQoudi1hdXRvY29tcGxldGU6bm90KC52LWlucHV0LS1pcy1kaXNhYmxlZCkudi1zZWxlY3Qudi10ZXh0LWZpZWxkIGlucHV0IHsNCiAgY29sb3I6IGJsYWNrOw0KfQ0KLnYtbGFiZWwudi1sYWJlbC0tYWN0aXZlLnRoZW1lLS1saWdodCB7DQogIGNvbG9yOiByZ2IoMjU1LCA4MSwgMCk7DQp9DQoudi1sYWJlbC50aGVtZS0tbGlnaHR7DQogIGNvbG9yOiByZ2IoMjU1LCA4MSwgMCk7DQp9DQpoMSB7DQogIGNvbG9yOm9yYW5nZXJlZCAhaW1wb3J0YW50Ow0KfQ0KbmV3LXByb2R1Y3R7DQogIGNvbG9yOiByZ2IoMjU1LCA4MSwgMCk7DQp9DQo="},{"version":3,"sources":["New.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"New.vue","sourceRoot":"src/views/products","sourcesContent":["<template>\r\n  <div class=\"new-product\">\r\n    <h1>{{ isNew ? \"New\" : \"Edit\" }} Product</h1>\r\n    <div v-if=\"!changeImage\">\r\n      <v-img v-if=\"!isNew\" :src=\"imageUrl\"></v-img>\r\n      <v-file-input\r\n        v-if=\"isNew\"\r\n        accept=\"image/*\"\r\n        label=\"Image\"\r\n        v-model=\"image\"\r\n        :rules=\"imageRules\"\r\n      ></v-file-input>\r\n      <v-text-field\r\n        label=\"Code\"\r\n        v-model=\"code\"\r\n        prepend-icon=\"mdi-code-tags\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Name\"\r\n        v-model=\"name\"\r\n        prepend-icon=\"mdi-account\"\r\n      ></v-text-field>\r\n      <v-text-field\r\n        label=\"Price\"\r\n        v-model=\"price\"\r\n        prepend-icon=\"mdi-currency-usd\"\r\n      ></v-text-field>\r\n      <v-combobox\r\n        prepend-icon=\"mdi-shape\"\r\n        v-model=\"categories\"\r\n        chips\r\n        clearable\r\n        label=\"Categories\"\r\n        multiple\r\n        solo\r\n      >\r\n        <template v-slot:selection=\"{ attrs, item, select, selected }\">\r\n          <v-chip\r\n            v-bind=\"attrs\"\r\n            :input-value=\"selected\"\r\n            close\r\n            @click=\"select\"\r\n            @click:close=\"removeChip(item)\"\r\n          >\r\n            {{ item }}\r\n          </v-chip>\r\n        </template>\r\n      </v-combobox>\r\n\r\n      <div class=\"botones\">\r\n        <v-btn color=\"primary\" @click=\"guardarProducto()\" v-if=\"isNew\"\r\n          >Guardar</v-btn\r\n        >\r\n        <v-btn color=\"warning\" @click=\"changeImage = true\" v-if=\"!isNew\"\r\n          >Actualizar imagen</v-btn\r\n        >\r\n        <v-btn color=\"success\" @click=\"actualizarProducto()\" v-if=\"!isNew\"\r\n          >Actualizar</v-btn\r\n        >\r\n      </div>\r\n    </div>\r\n    <div v-if=\"changeImage\">\r\n      <v-file-input\r\n        accept=\"image/*\"\r\n        label=\"Image\"\r\n        v-model=\"image\"\r\n        :rules=\"imageRules\"\r\n      ></v-file-input>\r\n      <div class=\"botones\">\r\n        <v-btn color=\"success\" @click=\"cambiarImagen()\"\r\n          >Actualizar imagen</v-btn\r\n        >\r\n      </div>\r\n    </div>\r\n\r\n    <v-snackbar v-model=\"snackbar\">\r\n      {{ snackbarText }}\r\n\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn color=\"pink\" text v-bind=\"attrs\" @click=\"closeConfirmation()\">\r\n          Close\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  createProduct,\r\n  createProductWithImage,\r\n  getProduct,\r\n  updateProduct,\r\n  updateProductImage,\r\n} from \"../../controllers/Product.controller\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      image: null,\r\n      code: 0,\r\n      name: \"\",\r\n      price: 0,\r\n      categories: [],\r\n      imageUrl: \"\",\r\n      snackbar: false,\r\n      snackbarText: \"\",\r\n      isNew: true,\r\n      imageRules: [\r\n        (value) =>\r\n          !value ||\r\n          value.size < 2000000 ||\r\n          \"Avatar size should be less than 2 MB!\",\r\n      ],\r\n      changeImage: false,\r\n    };\r\n  },\r\n  created() {\r\n    const code = this.$route.params.code;\r\n    if (code != undefined) {\r\n      getProduct(code)\r\n        .then((response) => {\r\n          const product = response.data;\r\n          this.code = product.code;\r\n          this.name = product.name;\r\n          this.price = product.price;\r\n          this.categories = product.categories;\r\n          this.imageUrl = product.imageUrl;\r\n\r\n          this.isNew = false;\r\n        })\r\n        .catch((err) => console.error(err));\r\n    }\r\n  },\r\n  methods: {\r\n    guardarProducto() {\r\n      let request = null;\r\n      if (this.image == null || this.image == undefined) {\r\n        const product = {\r\n          code: this.code,\r\n          name: this.name,\r\n          price: this.price,\r\n          categories: this.categories,\r\n        };\r\n\r\n        request = createProduct(product);\r\n      } else {\r\n        const product = new FormData();\r\n        product.append(\"code\", this.code);\r\n        product.append(\"name\", this.name);\r\n        product.append(\"price\", this.price);\r\n        product.append(\"categories\", JSON.stringify(this.categories));\r\n        product.append(\"image\", this.image);\r\n\r\n        request = createProductWithImage(product);\r\n      }\r\n\r\n      request\r\n        .then(() => {\r\n          this.openSuccessDialog(\"Guardado correctamente\");\r\n        })\r\n        .catch((err) => console.error(err));\r\n    },\r\n    actualizarProducto() {\r\n      if (\r\n        this.code == undefined ||\r\n        this.code == \"\" ||\r\n        this.name == undefined ||\r\n        this.name == \"\" ||\r\n        this.price == undefined ||\r\n        this.price == \"\"\r\n      ) {\r\n        this.openErrorDialog(\"Ingrese los campos obligatorios\");\r\n        return;\r\n      }\r\n\r\n      const product = {\r\n        code: this.code,\r\n        name: this.name,\r\n        price: this.price,\r\n        categories: this.categories,\r\n      };\r\n      updateProduct(this.code, product)\r\n        .then(() => {\r\n          this.changeImage = false;\r\n          this.openSuccessDialog(\"Se ha actualizado el producto: \" + this.code);\r\n        })\r\n        .catch(() => this.openErrorDialog(\"Error al actualizar el producto\"));\r\n    },\r\n    cambiarImagen() {\r\n      if (this.image == undefined || this.image == \"\") {\r\n        this.openErrorDialog(\"La imagen es un campo obligatorio\");\r\n        return;\r\n      }\r\n\r\n      const data = new FormData();\r\n      data.append(\"image\", this.image);\r\n      updateProductImage(this.code, data)\r\n        .then(() =>\r\n          this.openSuccessDialog(\"Se ha actualizado el producto: \" + this.code)\r\n        )\r\n        .catch(() => this.openErrorDialog(\"Error al actualizar el producto\"));\r\n    },\r\n    removeChip(item) {\r\n      this.categories.splice(this.categories.indexOf(item), 1);\r\n      this.categories = [...this.categories];\r\n    },\r\n    openSuccessDialog(mensaje) {\r\n      this.snackbarText = mensaje;\r\n      this.snackbar = true;\r\n    },\r\n    openErrorDialog(mensaje) {\r\n      this.snackbarText = mensaje;\r\n      this.snackbar = true;\r\n    },\r\n    closeConfirmation() {\r\n      this.snackbar = false;\r\n      this.$router.push(\"/products\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scope>\r\n.botones {\r\n  display: flex;\r\n  justify-content: right;\r\n  color: aliceblue;;\r\n}\r\n.mdi-account::before {\r\n  color: rgb(255, 81, 0);\r\n}\r\n.v-icon.v-icon.v-icon--link {\r\n  color: rgb(255, 81, 0);\r\n}\r\n.mdi-code-tags::before {\r\n  color: rgb(255, 81, 0);\r\n\r\n}\r\n.theme--light.v-input input, .theme--light.v-input textarea {\r\n  color: aliceblue;\r\n}\r\n.mdi-currency-usd::before {\r\n  color: rgb(255, 81, 0);\r\n}\r\n.mdi-shape::before {\r\n  color: rgb(255, 81, 0)\r\n}\r\n.v-autocomplete:not(.v-input--is-disabled).v-select.v-text-field input {\r\n  color: black;\r\n}\r\n.v-label.v-label--active.theme--light {\r\n  color: rgb(255, 81, 0);\r\n}\r\n.v-label.theme--light{\r\n  color: rgb(255, 81, 0);\r\n}\r\nh1 {\r\n  color:orangered !important;\r\n}\r\nnew-product{\r\n  color: rgb(255, 81, 0);\r\n}\r\n</style>"]}]}